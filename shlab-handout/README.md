# shell lab

这里是~~还没有开始就已经~~发生了一点小插曲的as :joy:

因为之前我给习题写的mysh是限制了最大子进程数的，但是writeup中说任意个进程

所以在tshref中试了下，结果最多16个，但是...虽然提示说`Tried to create too many jobs`，但是事实上他还是创建了（而且jobs里面没有，而且用fg和bg都提示说`No such process`，而且如果quit时，还有没有结束的进程，那么也不会被回收（而且这个时候如果不输入builtin\_command的话会不停提示过多jobs，而且输出是乱的，而且sh套sh会stop，导致停止的信号是SIGTTIN，一口气说了好多（

不过这些都是小插曲，正片是我突然想到那么我自己机子上的shell可以创建多少个子进程呢，然后在我创建了1w多一点的时候，提示说fork:重试等待资源什么的，这个时候我ctrl+alt+t连个shell都叫不出来了（想ps看都有什么也要等待资源...即使我关掉那个shell也还是一卡一卡的（通过系统监视器把之前在tshref中没有被回收的一百多个子进程kill掉也没有什么变化...最后只得重启（不亏是完成品的shell，只要能创建，就能一直创建，不能创建还要等到能创建再创建

其实tsh在昨天（2019-11-19)就已经写完了，但是当我看表的时候已经是十点了（如果锁门的话）我已经被宿管锁外面了，所以赶快跑了回去，因为最近又开始了早起，所以回去就睡了，然后今天上午又被web前端的作业折腾了一上午（真的忘完了...等到中午才开始，然而我现在还没吃饭(utc+8 13:30)，还因此冷死了QAQ

写了一个lastsh.sh，然后用于最后的测试和比较，最终输出都在lastshoutput里面，可以看到除了pid和一些脚本名以外和ref输出是完全一样的，摸着良心说，这个比mysh写起来简单多了...大框架给了，提示也那么多，我自己的mysh是参考自己机子上的shell行为来写的，所以fg和bg没有参数的话会使用最后一个前台进程，这边自然是和ref identical的。

可惜这个没有明确的评分器什么的，虽然我diff了两者的输出，但是最后的判断还是肉眼来进行的...应该算是过了吧（可以说是自bomb lab之后第一次这么顺的lab了...

不过说实话linux信号，系统调用这些东西并不能就这样说过了，csapp在这里讲的感觉更多的是一个领进门的感觉

马上要期末了，我是复习呢还是继续看csapp呢，当然是继续看csapp了！

好想变强啊QAQ

下面是负能量，不想看的朋友可以回避下，本来想调成白色或者把背景色换成黑色，但是不管是font还是td的bgcolor通通不管用

~~其实有时候有种在赶进度的感觉是因为不想被课本带入一个陈旧的或是错误的初始概念，比如问cpu怎么区分指令还是数据这种问题答案是看周期答案...这只是把一个问题变成另一个问题罢了，本来这个问题就不是问题，cpu取指令就是指令，取数据就是数据，把指令当数据取来修改也不是不可能，怎么区分在你取前就已经区分好了，为什么你会问cpu在取出来之后怎么区分呢...~~

~~↑上面有个人情绪部分，因为某sb数次问我这个问题，因为不同时期我学的东西不一样，所以答案各不相同，而sb从不说自己的答案。昨天老师课上问，sb如是答，老师说他说得对，为了不打断课程进度我没怼他，根据周期判断是什么只有顺序cpu下我们的周期是被严格分开的情况下我觉得勉强可以这么说，流水线cpu的话有周期不同的概念吗~~

~~(差不多也冷静了一点，嘛我也是累了（这么久下来连个能好好交流自己对问题的思考的人都没有，只有照本宣科...只有"书上没有说所以是错的"，问我道题，说"树的左孩子"，我问他是不是二叉树...他说不是...问他除了二叉树谁还有左孩子，不答，看原题，"树先根遍历二叉生成树"，呵，你他喵是没看题吗？还说我为啥质疑他，"看，题上没有说二叉树吧"，我不知道你是真的蠢还是在耍我...在宿舍天天外放...晚上最后一个上床而且必啪啪从床上丢鞋...热水器24小时最高（你家真的是贫困户？）...如果不是亲眼见你看到好友说话不回你说你很累不想回我就信了...问他考研买啥书支支吾吾最后说不准备买，结果早早买了王道...注册华章教练账号然后白嫖书还炫耀...曾经看他公众号说我是朋友我信了，越交流越感觉三观不和我假装没感觉到，你现在来耍我，麻烦sb离我远点...嘛，讨厌一个人的时候真的是他说句话都想怼他...好像又在这里发泄了，犹豫了下不删了（看到这里负能量的朋友抱歉~~

